function detectDeviceType(){const e=navigator.userAgent.toLowerCase(),t=window.innerWidth,o=window.innerHeight,n=t/o,s=document.body;s.classList.remove("device-mobile","device-pad","device-pc");if(/iphone|ipod|android.*mobile|windows phone/.test(e)||(t<=767||t<=900&&o<=500))return s.classList.add("device-mobile"),void("function"==typeof onMobile&&onMobile());if(t>=768&&t<=1280&&(n<=1.6&&n>=.5)&&o>=700)return s.classList.add("device-pad"),void("function"==typeof onMobile&&onMobile());s.classList.add("device-pc"),"function"==typeof onPC&&onPC()}window.addEventListener("DOMContentLoaded",(()=>{enableDragScroll($(".drag-scroll-mask, .drag-scroll-overlay"))})),detectDeviceType(),window.addEventListener("resize",detectDeviceType);const lenis=new Lenis({smooth:!0,direction:"vertical",gestureDirection:"vertical",smoothTouch:!1,lerp:.08,wheelMultiplier:1.2});function raf(e){lenis.raf(e),requestAnimationFrame(raf)}function updateCustomCSSVars(){const e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",e.style.width="100px",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth;document.body.removeChild(e),document.documentElement.style.setProperty("--scrollbar",`${t}px`),setTimeout((()=>{const e=parseFloat(getComputedStyle(document.documentElement).fontSize);document.documentElement.style.setProperty("--fz",`${e}px`);const t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`)}),50)}function getOffsetTop(e){for(var t=0;e;)t+=e.offsetTop,e=e.offsetParent;return[t]}function enableDragScroll(e){e.each((function(){const e=$(this);let t,o,n=!1,s=!1;e.on("mousedown",(r=>{n=!0,s=!1,t=r.pageX,o=r.currentTarget.scrollLeft,e.addClass("dragging")})),e.on("mousemove",(e=>{if(!n)return;const r=e.pageX-t;Math.abs(r)>3&&(s=!0,e.currentTarget.scrollLeft=o-r)})),$(document).on("mouseup.dragScroll",(()=>{n&&(e.removeClass("dragging"),s&&e.data("preventClick",!0)),n=!1})),e[0].addEventListener("click",(t=>{e.data("preventClick")&&(t.stopPropagation(),t.preventDefault(),e.data("preventClick",!1))}),!0),e.on("scroll",(()=>{const t=e.scrollLeft(),o=e[0].scrollWidth-e.innerWidth();e.toggleClass("left-active",t>10),e.toggleClass("right-active",t<o-10)})),e.hasClass("drag-scroll-overlay")&&e[0].style.setProperty("--drag-height",e.height()+"px"),setTimeout((()=>e.trigger("scroll")),50)}))}function breadcrumb(){const e=document.querySelector(".nav-breadcrumb ol");if(!e)return;e.innerHTML='<li><a href="/dist/index.html">Top</a></li>';const t=location.pathname.replace(/^\/dist\//,"").split("/").filter(Boolean),o={"html-pages":"","html-news":"News"},n={"page-about.html":"About","page-news.html":"News","page-team.html":"Our Team","page-contact.html":"Contact Us"};let s="";t.forEach(((r,c)=>{const l=c===t.length-1;if(void 0!==o[r]){s+="/"+r;const t=document.createElement("li"),n=o[r];return void(n&&(t.innerHTML=`<a href="${s}/">${n}</a>`,e.appendChild(t)))}s+="/"+r;let i=n[r];i||(i=r.replace(/\.[^/.]+$/,"").replace(/[-_]/g," ").replace(/\b\w/g,(e=>e.toUpperCase())));const a=document.createElement("li");l?(a.textContent=i,a.setAttribute("aria-current","page")):a.innerHTML=`<a href="${s}">${i}</a>`,e.appendChild(a)}))}function onMobile(){console.log("手機板");const e=document.getElementById("section_news");e&&e.querySelectorAll(".card").forEach((e=>{e.classList.contains("col-6")||e.classList.add("col-6")}))}function onPC(){const e=document.getElementById("hb_menu");if(!e)return;e.querySelector(".card-list")?.classList.add("row"),e.querySelectorAll(".card").forEach((e=>{e.classList.contains("col-3")||e.classList.add("col-3")}));const t=document.getElementById("section_about");if(!t)return;t.querySelectorAll(".card").forEach((e=>{e.classList.contains("col-4")||e.classList.add("col-4")}));const o=document.getElementById("section_news");o&&o.querySelectorAll(".card").forEach((e=>{e.classList.contains("col-4")||e.classList.add("col-4")}))}function HTMLTree(){const e=function e(t,o=0,n=[]){let s=t,r=o;if(n.some((e=>t.classList.contains(e))))return{deepest:null,depth:-1};for(let c of t.children){const{deepest:t,depth:l}=e(c,o+1,n);l>r&&(s=t,r=l)}return{deepest:s,depth:r}}(document.body,0,["guide"]);e.deepest?(console.log("最深的標籤:",e.deepest.outerHTML),console.log("層級數:",e.depth)):console.log("未找到符合條件的標籤。")}requestAnimationFrame(raf),window.loadingStart=performance.now(),window.addEventListener("load",(()=>{const e=performance.now()-loadingStart;setTimeout((()=>{document.querySelector("body")?.classList.remove("hidden"),document.querySelector(".mask")?.classList.remove("loading")}),e<500?500-e:0)})),window.addEventListener("load",updateCustomCSSVars),window.addEventListener("resize",updateCustomCSSVars),window.addEventListener("pageshow",updateCustomCSSVars),window.addEventListener("load",(()=>{const e=Array.from(document.querySelectorAll(".to-left, .to-center, .to-right"));function t(){e.forEach((e=>{const t=e.scrollWidth-e.clientWidth,o=e.classList.contains("to-center")?t/2:e.classList.contains("to-right")?t:0;e.scrollLeft=o}))}[300,600].forEach((e=>setTimeout(t,e)))})),document.querySelectorAll("img").forEach((e=>{e.addEventListener("dragstart",(function(e){e.preventDefault()}))})),$(".hb-btn").on("click",(function(){$(".header-hb").toggleClass("active"),$("body").toggleClass("modal-open")})),HTMLTree();