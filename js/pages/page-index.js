import{getLenis as t}from"../core/scroll-lenis.js";import{getOffsetTop as e}from"../utils/dom-utils.js";let n=!1;window.addEventListener("LenisReady",(function(){const o=t();if(!o)return void console.warn("lenis 尚未初始化，滾動效果不會生效");const c=document.querySelectorAll(".page-home .nav-ul a"),i=document.querySelectorAll("main section"),s=(c.length+1).toString().padStart(2,"0");function r(t){c.forEach(((e,n)=>{e.parentElement.classList.toggle("active",n===t)})),document.querySelector(".stage-num span:nth-child(1)").textContent=(t+1).toString().padStart(2,"0"),document.querySelector(".stage-num span:nth-child(3)").textContent=s}o.on("scroll",(()=>{n||function(){const t=window.scrollY,n=window.innerHeight;let o=-1;i.forEach(((c,i)=>{e(c)-t<=n/2&&(o=i)})),-1!==o&&r(o);const c=document.getElementById("section_opening");c&&(c.offsetTop+c.offsetHeight-t>=n/2?document.body.classList.add("at-opening"):document.body.classList.remove("at-opening"))}()})),c.forEach(((t,e)=>{t.addEventListener("click",(c=>{c.preventDefault();const i=document.querySelector(t.getAttribute("href"));i&&(n=!0,r(e),o.scrollTo(i,{offset:0,duration:1.2,easing:t=>1-Math.pow(1-t,4)}),setTimeout((()=>{n=!1}),1200))}))}))}));